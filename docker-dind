FROM docker:dind


ENV NEXUS_URL=nexus.crepen.cloud
ENV NEXUS_PACKAGE_URL=${NEXUS_URL}/crepencdn-docker

# DIND ENV
ENV DIND_CLOUD_PORT=3000



# CLOUD ENV
ENV CLOUD_API_URL=http://crepen-cdn-server:13332

# SERVER ENV
ENV SERVER_DATA_DIR=/var/opt/crepen/cdn
ENV SERVER_LOG_DIR=/var/log/crepen/cdn
ENV SERVER_CONFIG_DIR=/etc/crepen/cdn
ENV SERVER_PORT=13332

# MARIADB_ENV
ENV MARIADB_PW=qwer1234

VOLUME [ "/var/opt/crepen/cloud" , "/var/opt/crepen/server" , "/var/opt/crepen/mariadb" ]


# RUN docker network create crepen-cdn-network
# RUN docker run -d -p ${DIND_CLOUD_PORT}:3000 --name crepen-cdn-cloud -e API_URL=${CLOUD_API_URL} --hostname crepen-cdn-cloud ${NEXUS_PACKAGE_URL}/crepen-cdn-cloud:latest 
